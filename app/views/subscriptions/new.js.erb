

function formToggle(){

  const formContainer = document.getElementById('new-subs');
  const subsList = document.querySelector('#subs-list');
  const newSubButton = document.querySelector('.new-sub-button');
  const buttonContainer = document.querySelector('.new-sub-section');
  const subs = subsList.querySelectorAll('a[data-remote]');
  subs.forEach(sub => sub.disabled = true);

  subsList.style.flex = "0 1 70%";
  buttonContainer.style.opacity = 0;
  setTimeout(() => buttonContainer.style.display = 'none', 50);
  formContainer.style.transform =  `translateX(0)`

  formContainer.innerHTML = '<%= j render "subscriptions/form", subscription: @subscription %>';
  //  First I append the form..
  // Second I listen on the close button once form is displayed
  const closeButton = document.getElementById('close-button');
  closeButton.addEventListener('click', handleClick)

  function handleClick(){
    if(formContainer.innerHTML !== "") {
      subs.forEach(sub => sub.disabled = false);
     formContainer.innerHTML = "";
       subsList.style.flex = "0 0 100%";
       buttonContainer.height = '';
      setTimeout(() => buttonContainer.style.display = 'block', 50);

       buttonContainer.style.opacity = 1;
     // formsContainer.classList.remove('new-subs-active')
    }
  }
}
formToggle();


